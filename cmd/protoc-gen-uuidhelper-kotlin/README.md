# protoc-gen-uuidhelper-kotlin Usage

This README explains how to use the Kotlin extensions generated by the `protoc-gen-uuidhelper-kotlin` plugin to read and write your `*_uuid` fields in a natural, idiomatic way.

---

## Generated Extensions

For every `bytes foo_uuid = N;` field in your `.proto`, the plugin emits two Kotlin extensions in the same package as your generated classes (e.g. `me.name.app`):

1. **DSL getter/setter** on `PlayerKt.Dsl`
2. **Message getter** on `Player`

### Example `.proto`

```proto
message Player {
  bytes internal_uuid = 1;
  string username     = 2;
  bytes session_uuid  = 3;
  string string_uuid  = 4;
}
````

---

## 1. DSL Setter

Inside a `player { … }` block you can assign a `java.util.UUID` directly:

```kotlin
import me.name.app.PlayerOuterClass

fun main() {
  val internal = UUID.randomUUID()
  val session  = UUID.randomUUID()

  val built: PlayerOuterClass.Player = player {
    InternalUUID = internal
    SessionUUID  = session
  }
  // built is immutable, but you’ve set both fields conveniently
}
```

* The generated property `InternalUUID` (note PascalCase) maps to the builder’s `setInternalUuid(...)` under the hood.
* Likewise `SessionUUID` maps to `setSessionUuid(...)`.

---

## 2. Message Getter

After building, read back the UUID using the generated `sessionUUID` / `internalUUID` extension on the message:

```kotlin
val p = player {
  InternalUUID = internal
  SessionUUID  = session
}

println("Internal: ${p.InternalUUID()}  Session: ${p.SessionUUID()}")
```

Under the covers each call invokes the Java getter `getInternalUuid()` / `getSessionUuid()` and converts the `ByteString` to `UUID`

---

## Quickstart

1. **Build the plugin**

```bash
go build -o protoc-gen-uuidhelper-kotlin ./cmd/protoc-gen-uuidhelper-kotlin
```

2. **Invoke `protoc`**

```bash
protoc \
  --plugin=protoc-gen-uuidhelper-kotlin=./protoc-gen-uuidhelper-kotlin \
  --uuidhelper-kotlin_out=gen/kotlin \
  -I. your.proto
```

This generates the Kotlin extensions in `gen/kotlin` (or whatever you specified).

3. **Import and use in your Kotlin code**

After importing the generated files, you can use the new methods to read and write UUIDs easily, like shown above.
