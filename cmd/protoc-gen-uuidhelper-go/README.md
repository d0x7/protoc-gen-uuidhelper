# protoc-gen-uuidhelper-go Usage

This README explains how to use the Go helper methods generated by the `protoc-gen-uuidhelper-go` plugin to read and write your `*_uuid` fields as `github.com/google/uuid.UUID` in Go.

---

## Generated Methods

For every `bytes foo_uuid = N;` field in your `.proto`, the plugin emits two methods on the generated message struct:

1. **Setter**: `SetFooUUID(u uuid.UUID)`
2. **Getter**: `GetFooUUID() uuid.UUID`

These wrap the underlying `[]byte` field accessors and convert to/from `uuid.UUID` automatically.

### Example `.proto`

```proto
message Player {
  bytes internal_uuid = 1;
  string username     = 2;
  bytes session_uuid  = 3;
  string  string_uuid = 4;
}
````

After code-generation you will have, for `internal_uuid` and `session_uuid`:

```go
func (m *Player) SetInternalUUID(u uuid.UUID) { m.SetInternalUuid(u[:]) }
func (m *Player) GetInternalUUID() uuid.UUID  { return uuid.FromBytesOrNil(m.GetInternalUuid()) }

func (m *Player) SetSessionUUID(u uuid.UUID) { m.SetSessionUuid(u[:]) }
func (m *Player) GetSessionUUID() uuid.UUID  { return uuid.FromBytesOrNil(m.GetSessionUuid()) }
```

---

## 1. Setter

When creating a new message, you can set the UUID directly:

```go
import (
    "github.com/google/uuid"
    "your/module/gen"
)
func main() {
    internal := uuid.Must(uuid.NewRandom())
    session := uuid.Must(uuid.NewRandom())
    
    player := &gen.Player{}
    player.SetInternalUUID(internal)
    player.SetSessionUUID(session)
}
```

* The generated method `SetInternalUUID` (note CamelCase) maps to the underlying `SetInternalUuid` under the hood.
* Likewise `SetSessionUUID` maps to `SetSessionUuid`.

---

## 2. Getter

After building, read back the UUID using the generated `GetSessionUUID` / `GetInternalUUID` method on the message:

```go
player := &gen.Player{}
player.SetInternalUUID(uuid.Must(uuid.NewRandom()))
player.SetSessionUUID(uuid.Must(uuid.NewRandom()))

fmt.Printf("Internal: %v  Session: %v\n", player.GetInternalUUID(), player.GetSessionUUID())
```

Under the covers each call invokes the Go getter `GetInternalUuid()` / `GetSessionUuid()` and converts the `[]byte` to `uuid.UUID`.

---

## Quickstart

1. **Build the plugin**

```bash
go build -o protoc-gen-uuidhelper-go ./cmd/protoc-gen-uuidhelper-go
```

2. **Invoke `protoc`**

```bash
protoc \
 --plugin=protoc-gen-uuidhelper-go=./protoc-gen-uuidhelper-go \
 --uuidhelper-go_out=./gen/go \
 -I. your.proto
```

This will generate `.pb.go` files in `./gen/go` with the extra `Set…UUID` / `Get…UUID` methods.

3. **Import and use in your Go code**

After importing the generated package, you can use the new methods to set and get UUIDs easily, like shown above.
